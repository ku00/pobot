# Description:
#   Example scripts for you to examine and try out.
#
# Notes:
#   They are commented out by default, because most of them are pretty silly and
#   wouldn't be useful and amusing enough for day to day huboting.
#   Uncomment the ones you want to try and experiment with.
#
#   These are from the scripting documentation: https://github.com/github/hubot/blob/master/docs/scripting.md

{inspect} = require 'util'
module.exports = (robot) ->
  # robot.listenerMiddleware (robot, listener, response, next, done) ->
  #   # Log commands
  #   # console.log inspect listener
  #   console.log inspect response.message
  #   next(done)
  #
  # # censorship middleware
  # robot.listenerMiddleware (robot, listener, response, next, done) ->
  #   if response.message.text?.match(/moist/)
  #     response.message.text = response.message.text.replace(/moist/, 'damp')
  #     # update to see if it's still a match for this listener
  #     response.match = listener.matcher(response.message)
  #
  #     unless response.match
  #       console.log "CENSORSHIP"
  #       response.reply "Sorry, your dirty message used to match a listener, but now it doesn't"
  #       done()
  #       return
  #
  #   next(done)

  # node-statsd like interface
  stats =
    increment: (key) ->
      console.log "#{key}:1|c"
      # noop

  # generic stats middleware
  # robot.listenerMiddleware (robot, listener, response, next, done) ->
  #   listenerId = listener.options?.id
  #   if listenerId?
  #     stats.increment "hubot.listeners.total.#{listenerId}"
  #     if response.message.user?.name?
  #       stats.increment "hubot.listeners.by_user.#{response.message.user.name}.#{listenerId}"
  #     if response.message.user?.room?
  #       stats.increment "hubot.listeners.by_room.#{response.message.user.room}.#{listenerId}"
  #
  #   next(done)

  robot.respond /moist/i, id: 'moist', (msg) ->
    msg.reply "I don't like that word :("

  robot.respond /ECHO (.*)$/i, id: 'echo', (msg) ->
    msg.send msg.match[1]

  robot.hear /badger/i, (msg) ->
    msg.send "Badgers? BADGERS? WE DON'T NEED NO STINKIN BADGERS"

  robot.hear /sup/i, (msg) ->
    user = msg.message.user
    msg.send "id: #{user.id}, name: #{user.name}"
